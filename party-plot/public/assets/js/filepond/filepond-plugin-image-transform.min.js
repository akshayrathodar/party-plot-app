/*!
 * FilePondPluginImageTransform 3.8.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */ !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).FilePondPluginImageTransform=e()}(this,function(){"use strict";var t,e={jpeg:"jpg","svg+xml":"svg"},n=function t(n,r){var i,o=(i=n).substr(0,i.lastIndexOf("."))||i,a=r.split("/")[1],u=e[a]||a;return"".concat(o,".").concat(u)},r={1:function t(){return[1,0,0,1,0,0]},2:function t(e){return[-1,0,0,1,e,0]},3:function t(e,n){return[-1,0,0,-1,e,n]},4:function t(e,n){return[1,0,0,-1,0,n]},5:function t(){return[0,1,1,0,0,0]},6:function t(e,n){return[0,1,-1,0,n,0]},7:function t(e,n){return[0,-1,-1,0,n,e]},8:function t(e){return[0,-1,1,0,0,e]}},i=function t(e,n){return{x:e,y:n}},o=function t(e,n){return i(e.x-n.x,e.y-n.y)},a=function t(e,n){var r,i;return r=o(e,n),i=o(e,n),r.x*i.x+r.y*i.y},u=function t(e,n){return Math.sqrt(a(e,n))},c=function t(e,n){var r=1.5707963267948966-n,o=Math.cos(r),a=e/1;return i(o*(a*Math.sin(n)),o*(a*Math.sin(r)))},l=function t(e,n){var r=e.width,o=e.height,a=c(r,n),l=c(o,n),f=i(e.x+Math.abs(a.x),e.y-Math.abs(a.y)),s=i(e.x+e.width+Math.abs(l.y),e.y+Math.abs(l.x)),h=i(e.x-Math.abs(l.y),e.y+e.height-Math.abs(l.x));return{width:u(f,s),height:u(f,h)}},f=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:.5,y:.5},o=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,u=2*o*e.width,c=2*a*e.height,f=l(n,r);return Math.max(f.width/u,f.height/c)},s=function t(e,n){var r,i=e.width,o=i*n;return o>e.height&&(i=(o=e.height)/n),{x:(e.width-i)*.5,y:(e.height-o)*.5,width:i,height:o}},h=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.height/e.width,o=n,a=1,u=i;u>o&&(a=(u=o)/i);var c=Math.max(1/a,o/u),l=e.width/(r*c*a);return{width:l,height:l*n}},d=function t(e){e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},p=function t(e){return e&&(e.horizontal||e.vertical)},y=function t(e,n,i){if(n<=1&&!p(i))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;var o,a,u,c=document.createElement("canvas"),l=e.naturalWidth,f=e.naturalHeight,s=n>=5&&n<=8;s?(c.width=f,c.height=l):(c.width=l,c.height=f);var h=c.getContext("2d");if(n&&h.transform.apply(h,(o=l,a=f,-1===(u=n)&&(u=1),r[u](o,a))),p(i)){var d=[1,0,0,1,0,0];(!s&&i.horizontal||s&i.vertical)&&(d[0]=-1,d[4]=l),(!s&&i.vertical||s&&i.horizontal)&&(d[3]=-1,d[5]=f),h.transform.apply(h,d)}return h.drawImage(e,0,0,l,f),c},v=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.canvasMemoryLimit,a=i.background,u=void 0===a?null:a,c=r.zoom||1,l=y(e,n,r.flip),p={width:l.width,height:l.height},v=r.aspectRatio||p.height/p.width,$=h(p,v,c);if(o){var g=$.width*$.height;if(g>o){var m=Math.sqrt(o)/Math.sqrt(g);p.width=Math.floor(p.width*m),p.height=Math.floor(p.height*m),$=h(p,v,c)}}var w=document.createElement("canvas"),x={x:.5*$.width,y:.5*$.height},_={x:0,y:0,width:$.width,height:$.height,center:x},b=void 0===r.scaleToFit||r.scaleToFit,T=c*f(p,s(_,v),r.rotation,b?r.center:{x:.5,y:.5});w.width=Math.round($.width/T),w.height=Math.round($.height/T),x.x/=T,x.y/=T;var E={x:x.x-p.width*(r.center?r.center.x:.5),y:x.y-p.height*(r.center?r.center.y:.5)},A=w.getContext("2d");u&&(A.fillStyle=u,A.fillRect(0,0,w.width,w.height)),A.translate(x.x,x.y),A.rotate(r.rotation||0),A.drawImage(l,E.x-x.x,E.y-x.y,p.width,p.height);var k=A.getImageData(0,0,w.width,w.height);return d(w),k};"undefined"==typeof window||void 0===window.document||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function t(e,n,r){var i=this.toDataURL(n,r).split(",")[1];setTimeout(function(){for(var t=atob(i),r=t.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=t.charCodeAt(a);e(new Blob([o],{type:n||"image/png"}))})}});var $=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(t){Promise.resolve(r?r(e):e).then(function(e){e.toBlob(t,n.type,n.quality)})})},g=function t(e,n){return _(e.x*n,e.y*n)},m=function t(e,n){return _(e.x+n.x,e.y+n.y)},w=function t(e){var n=Math.sqrt(e.x*e.x+e.y*e.y);return 0===n?{x:0,y:0}:_(e.x/n,e.y/n)},x=function t(e,n,r){var i=Math.cos(n),o=Math.sin(n),a=_(e.x-r.x,e.y-r.y);return _(r.x+i*a.x-o*a.y,r.y+o*a.x+i*a.y)},_=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:e,y:n}},b=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0;return"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(i?n[i]:Math.min(n.width,n.height)):void 0},T=function t(e,n,r){var i=e.borderStyle||e.lineStyle||"solid",o=e.backgroundColor||e.fontColor||"transparent",a=e.borderColor||e.lineColor||"transparent",u=b(e.borderWidth||e.lineWidth,n,r),c=e.lineCap||"round",l=e.lineJoin||"round",f="string"==typeof i?"":i.map(function(t){return b(t,n,r)}).join(",");return{"stroke-linecap":c,"stroke-linejoin":l,"stroke-width":u||0,"stroke-dasharray":f,stroke:a,fill:o,opacity:e.opacity||1}},E=function t(e){return null!=e},A=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=b(e.x,n,r,"width")||b(e.left,n,r,"width"),o=b(e.y,n,r,"height")||b(e.top,n,r,"height"),a=b(e.width,n,r,"width"),u=b(e.height,n,r,"height"),c=b(e.right,n,r,"width"),l=b(e.bottom,n,r,"height");return E(o)||(o=E(u)&&E(l)?n.height-u-l:l),E(i)||(i=E(a)&&E(c)?n.width-a-c:c),E(a)||(a=E(i)&&E(c)?n.width-i-c:0),E(u)||(u=E(o)&&E(l)?n.height-o-l:0),{x:i||0,y:o||0,width:a||0,height:u||0}},k=function t(e,n){return Object.keys(n).forEach(function(t){return e.setAttribute(t,n[t])})},O=function t(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&k(r,n),r},P=function t(e){return k(e,Object.assign({},e.rect,e.styles))},I=function t(e){var n=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,i=.5*e.rect.width,o=.5*e.rect.height;return k(e,Object.assign({cx:n,cy:r,rx:i,ry:o},e.styles))},R={contain:"xMidYMid meet",cover:"xMidYMid slice"},M=function t(e,n){k(e,Object.assign({},e.rect,e.styles,{preserveAspectRatio:R[n.fit]||"none"}))},C={left:"start",center:"middle",right:"end"},S=function t(e,n,r,i){var o=b(n.fontSize,r,i),a=n.fontFamily||"sans-serif",u=n.fontWeight||"normal",c=C[n.textAlign]||"start";k(e,Object.assign({},e.rect,e.styles,{"stroke-width":0,"font-weight":u,"font-size":o,"font-family":a,"text-anchor":c})),e.text!==n.text&&(e.text=n.text,e.textContent=n.text.length?n.text:" ")},N=function t(e,n,r,i){k(e,Object.assign({},e.rect,e.styles,{fill:"none"}));var o=e.childNodes[0],a=e.childNodes[1],u=e.childNodes[2],c=e.rect,l={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(k(o,{x1:c.x,y1:c.y,x2:l.x,y2:l.y}),n.lineDecoration){a.style.display="none",u.style.display="none";var f=w({x:l.x-c.x,y:l.y-c.y}),s=b(.05,r,i);if(-1!==n.lineDecoration.indexOf("arrow-begin")){var h=g(f,s),d=m(c,h),p=x(c,2,d),y=x(c,-2,d);k(a,{style:"display:block;",d:"M".concat(p.x,",").concat(p.y," L").concat(c.x,",").concat(c.y," L").concat(y.x,",").concat(y.y)})}if(-1!==n.lineDecoration.indexOf("arrow-end")){var v=g(f,-s),$=m(l,v),_=x(l,2,$),T=x(l,-2,$);k(u,{style:"display:block;",d:"M".concat(_.x,",").concat(_.y," L").concat(l.x,",").concat(l.y," L").concat(T.x,",").concat(T.y)})}}},z=function t(e,n,r,i){var o;k(e,Object.assign({},e.styles,{fill:"none",d:(o=n.points.map(function(t){return{x:b(t.x,r,i,"width"),y:b(t.y,r,i,"height")}})).map(function(t,e){return"".concat(0===e?"M":"L"," ").concat(t.x," ").concat(t.y)}).join(" ")}))},D=function t(e){return function(t){return O(e,{id:t.id})}},L=function t(e){var n=O("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=O("line");n.appendChild(r);var i=O("path");n.appendChild(i);var o=O("path");return n.appendChild(o),n},F={image:function t(e){var n=O("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return n.onload=function(){n.setAttribute("opacity",e.opacity||1)},n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),n},rect:D("rect"),ellipse:D("ellipse"),text:D("text"),path:D("path"),line:L},G={rect:P,ellipse:I,image:M,text:S,path:z,line:N},U=function t(e,n,r,i,o){"path"!==n&&(e.rect=A(r,i,o)),e.styles=T(r,i,o),G[n](e,r,i,o)},B=function t(e,n){return e[1].zIndex>n[1].zIndex?1:e[1].zIndex<n[1].zIndex?-1:0},j=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return new Promise(function(t){var o=i.background,a=void 0===o?null:o,u=new FileReader;u.onloadend=function(){var e=u.result,i=document.createElement("div");i.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",i.innerHTML=e;var o=i.querySelector("svg");document.body.appendChild(i);var c=o.getBBox();i.parentNode.removeChild(i);var l=i.querySelector("title"),h=o.getAttribute("viewBox")||"",d=o.getAttribute("width")||"",p=o.getAttribute("height")||"",y=parseFloat(d)||null,v=parseFloat(p)||null,$=(d.match(/[a-z]+/)||[])[0]||"",g=(p.match(/[a-z]+/)||[])[0]||"",m=h.split(" ").map(parseFloat),w=m.length?{x:m[0],y:m[1],width:m[2],height:m[3]}:c,x=null!=y?y:w.width,_=null!=v?v:w.height;o.style.overflow="visible",o.setAttribute("width",x),o.setAttribute("height",_);var b="";if(r&&r.length){var T={width:x,height:_};b=r.sort(B).reduce(function(t,e){var n,r,i=(n=e[0],r=e[1],F[n](r));return U(i,e[0],e[1],T),i.removeAttribute("id"),1===i.getAttribute("opacity")&&i.removeAttribute("opacity"),t+"\n"+i.outerHTML+"\n"},""),b="\n\n<g>".concat(b.replace(/&nbsp;/g," "),"</g>\n\n")}var E=n.aspectRatio||_/x,A=x,k=A*E,O=void 0===n.scaleToFit||n.scaleToFit,P=n.center?n.center.x:.5,I=n.center?n.center.y:.5,R=f({width:x,height:_},s({width:A,height:k},E),n.rotation,O?{x:P,y:I}:{x:.5,y:.5}),M=n.zoom*R,C=n.rotation*(180/Math.PI),S={x:.5*A,y:.5*k},N={x:S.x-x*P,y:S.y-_*I},z=["rotate(".concat(C," ").concat(S.x," ").concat(S.y,")"),"translate(".concat(S.x," ").concat(S.y,")"),"scale(".concat(M,")"),"translate(".concat(-S.x," ").concat(-S.y,")"),"translate(".concat(N.x," ").concat(N.y,")"),],D=n.flip&&n.flip.horizontal,L=n.flip&&n.flip.vertical,G=["scale(".concat(D?-1:1," ").concat(L?-1:1,")"),"translate(".concat(D?-x:0," ").concat(L?-_:0,")"),],j='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="'.concat(A).concat($,'" height="').concat(k).concat(g,'" \nviewBox="0 0 ').concat(A," ").concat(k,'" ').concat(a?'style="background:'+a+'" ':"",'\npreserveAspectRatio="xMinYMin"\nxmlns:xlink="http://www.w3.org/1999/xlink"\nxmlns="http://www.w3.org/2000/svg">\n<!-- Generated by PQINA - https://pqina.nl/ -->\n<title>').concat(l?l.textContent:"",'</title>\n<g transform="').concat(z.join(" "),'">\n<g transform="').concat(G.join(" "),'">\n').concat(o.outerHTML).concat(b,"\n</g>\n</g>\n</svg>");t(j)},u.readAsText(e)})},q=function t(e){var n;try{n=new ImageData(e.width,e.height)}catch(r){n=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return n.data.set(e.data),n},V=function t(){var e={resize:function t(e,n){var i=n.mode,u=void 0===i?"contain":i,c=n.upscale,l=n.width,f=n.height,s=n.matrix;if(s=!s||o(s)?null:s,!l&&!f)return a(e,s);if(null===l?l=f:null===f&&(f=l),"force"!==u){var h=l/e.width,d=f/e.height,p=1;if("cover"===u?p=Math.max(h,d):"contain"===u&&(p=Math.min(h,d)),p>1&&!1===(void 0!==c&&c))return a(e,s);l=e.width*p,f=e.height*p}for(var y=e.width,v=e.height,$=Math.round(l),g=Math.round(f),m=e.data,w=new Uint8ClampedArray($*g*4),x=y/$,_=v/g,b=Math.ceil(.5*x),T=Math.ceil(.5*_),E=0;E<g;E++)for(var A=0;A<$;A++){for(var k=(A+E*$)*4,O=0,P=0,I=0,R=0,M=0,C=0,S=0,N=(E+.5)*_,z=Math.floor(E*_);z<(E+1)*_;z++)for(var D=Math.abs(N-(z+.5))/T,L=(A+.5)*x,F=D*D,G=Math.floor(A*x);G<(A+1)*x;G++){var U=Math.abs(L-(G+.5))/b,B=Math.sqrt(F+U*U);if(B>=-1&&B<=1&&(O=2*B*B*B-3*B*B+1)>0){var j=m[(U=4*(G+z*y))+3];S+=O*j,I+=O,j<255&&(O=O*j/250),R+=O*m[U],M+=O*m[U+1],C+=O*m[U+2],P+=O}}w[k]=R/P,w[k+1]=M/P,w[k+2]=C/P,w[k+3]=S/I,s&&r(k,w,s)}return{data:w,width:$,height:g}},filter:a},n=function t(n,r){var i,o,a=n.transforms,u=null;if(a.forEach(function(t){"filter"===t.type&&(u=t)}),u){var c=null;a.forEach(function(t){"resize"===t.type&&(c=t)}),c&&(c.data.matrix=u.data,a=a.filter(function(t){return"filter"!==t.type}))}r((i=a,o=n.imageData,i.forEach(function(t){o=e[t.type](o,t.data)}),o))};function r(t,e,n){var r=e[t]/255,i=e[t+1]/255,o=e[t+2]/255,a=e[t+3]/255,u=r*n[0]+i*n[1]+o*n[2]+a*n[3]+n[4],c=r*n[5]+i*n[6]+o*n[7]+a*n[8]+n[9],l=r*n[10]+i*n[11]+o*n[12]+a*n[13]+n[14],f=r*n[15]+i*n[16]+o*n[17]+a*n[18]+n[19];e[t]=255*Math.max(0,Math.min(1,Math.max(0,u*f)+1*(1-f))),e[t+1]=255*Math.max(0,Math.min(1,Math.max(0,c*f)+1*(1-f))),e[t+2]=255*Math.max(0,Math.min(1,Math.max(0,l*f)+1*(1-f)))}self.onmessage=function(t){n(t.data.message,function(e){self.postMessage({id:t.data.id,message:e},[e.data.buffer])})};var i=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,]);function o(t){return self.JSON.stringify(t||[])===i}function a(t,e){if(!e||o(e))return t;for(var n=t.data,r=n.length,i=e[0],a=e[1],u=e[2],c=e[3],l=e[4],f=e[5],s=e[6],h=e[7],d=e[8],p=e[9],y=e[10],v=e[11],$=e[12],g=e[13],m=e[14],w=e[15],x=e[16],_=e[17],b=e[18],T=e[19],E=0,A=0,k=0,O=0,P=0,I=0,R=0,M=0,C=0,S=0,N=0,z=0;E<r;E+=4)A=n[E]/255,k=n[E+1]/255,I=A*i+k*a+(O=n[E+2]/255)*u+(P=n[E+3]/255)*c+l,R=A*f+k*s+O*h+P*d+p,M=A*y+k*v+O*$+P*g+m,S=Math.max(0,I*(C=A*w+k*x+O*_+P*b+T))+1*(1-C),N=Math.max(0,R*C)+1*(1-C),z=Math.max(0,M*C)+1*(1-C),n[E]=255*Math.max(0,Math.min(1,S)),n[E+1]=255*Math.max(0,Math.min(1,N)),n[E+2]=255*Math.max(0,Math.min(1,z));return t}},H=function t(e,n){if(1165519206===e.getUint32(n+4,!1)){n+=4;var r=18761===e.getUint16(n+=6,!1);n+=e.getUint32(n+4,r);var i=e.getUint16(n,r);n+=2;for(var o=0;o<i;o++)if(274===e.getUint16(n+12*o,r))return e.setUint16(n+12*o+8,1,r),!0;return!1}},W=function t(e){var n,r,i=new DataView(e);if(65496!==i.getUint16(0))return null;for(var o=2,a=!1;o<i.byteLength&&(n=i.getUint16(o,!1),r=i.getUint16(o+2,!1)+2,(n>=65504&&n<=65519||65534===n)&&(a||(a=H(i,o,r)),!(o+r>i.byteLength)));){o+=r}return e.slice(0,o)},Y=function t(e,n){var r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){var i=new r;return i.append(e),i.getBlob(n)}return new Blob([e],{type:n})},Q=function t(e){var n=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(n),i=new Worker(r),o=[];return{transfer:function t(){},post:function t(e,n,r){var a=Math.random().toString(36).substr(2,9);o[a]=n,i.onmessage=function(t){var e=o[t.data.id];e&&(e(t.data.message),delete o[t.data.id])},i.postMessage({id:a,message:e},r)},terminate:function t(){i.terminate(),URL.revokeObjectURL(r)}}},J=function t(e,n){e.beginPath(),e.lineCap=n["stroke-linecap"],e.lineJoin=n["stroke-linejoin"],e.lineWidth=n["stroke-width"],n["stroke-dasharray"].length&&e.setLineDash(n["stroke-dasharray"].split(",")),e.fillStyle=n.fill,e.strokeStyle=n.stroke,e.globalAlpha=n.opacity||1},K=function t(e){e.fill(),e.stroke(),e.globalAlpha=1},X={rect:function t(e,n,r){var i=A(r,n),o=T(r,n);return J(e,o),e.rect(i.x,i.y,i.width,i.height),K(e,o),!0},ellipse:function t(e,n,r){var i=A(r,n),o=T(r,n);J(e,o);var a=i.x,u=i.y,c=i.width,l=i.height,f=c/2*.5522848,s=l/2*.5522848,h=a+c,d=u+l,p=a+c/2,y=u+l/2;return e.moveTo(a,y),e.bezierCurveTo(a,y-s,p-f,u,p,u),e.bezierCurveTo(p+f,u,h,y-s,h,y),e.bezierCurveTo(h,y+s,p+f,d,p,d),e.bezierCurveTo(p-f,d,a,y+s,a,y),K(e,o),!0},image:function t(e,n,r,i){var o=A(r,n),a=T(r,n);J(e,a);var u=new Image;new URL(r.src,window.location.href).origin!==window.location.origin&&(u.crossOrigin=""),u.onload=function(){if("cover"===r.fit){var t=o.width/o.height,n=t>1?u.width:u.height*t,c=t>1?u.width/t:u.height,l=.5*u.width-.5*n,f=.5*u.height-.5*c;e.drawImage(u,l,f,n,c,o.x,o.y,o.width,o.height)}else if("contain"===r.fit){var s=Math.min(o.width/u.width,o.height/u.height),h=s*u.width,d=s*u.height,p=o.x+.5*o.width-.5*h,y=o.y+.5*o.height-.5*d;e.drawImage(u,0,0,u.width,u.height,p,y,h,d)}else e.drawImage(u,0,0,u.width,u.height,o.x,o.y,o.width,o.height);K(e,a),i()},u.src=r.src},text:function t(e,n,r){var i=A(r,n),o=T(r,n);J(e,o);var a=b(r.fontSize,n),u=r.fontFamily||"sans-serif",c=r.fontWeight||"normal",l=r.textAlign||"left";return e.font="".concat(c," ").concat(a,"px ").concat(u),e.textAlign=l,e.fillText(r.text,i.x,i.y),K(e,o),!0},line:function t(e,n,r){var i=A(r,n),o=T(r,n);J(e,o),e.beginPath();var a={x:i.x,y:i.y},u={x:i.x+i.width,y:i.y+i.height};e.moveTo(a.x,a.y),e.lineTo(u.x,u.y);var c=w({x:u.x-a.x,y:u.y-a.y}),l=.04*Math.min(n.width,n.height);if(-1!==r.lineDecoration.indexOf("arrow-begin")){var f=g(c,l),s=m(a,f),h=x(a,2,s),d=x(a,-2,s);e.moveTo(h.x,h.y),e.lineTo(a.x,a.y),e.lineTo(d.x,d.y)}if(-1!==r.lineDecoration.indexOf("arrow-end")){var p=g(c,-l),y=m(u,p),v=x(u,2,y),$=x(u,-2,y);e.moveTo(v.x,v.y),e.lineTo(u.x,u.y),e.lineTo($.x,$.y)}return K(e,o),!0},path:function t(e,n,r){var i=T(r,n);J(e,i),e.beginPath();var o=r.points.map(function(t){return{x:b(t.x,n,1,"width"),y:b(t.y,n,1,"height")}});e.moveTo(o[0].x,o[0].y);for(var a=o.length,u=1;u<a;u++)e.lineTo(o[u].x,o[u].y);return K(e,i),!0}},Z=function t(e){var n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e,0,0),n},tt=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(t,i){if(!e||(E=e,!/^image/.test(E.type)))return i({status:"not an image file",file:e});var o=r.stripImageHead,a=r.beforeCreateBlob,u=r.afterCreateBlob,c=r.canvasMemoryLimit,l=n.crop,f=n.size,s=n.filter,h=n.markup,p=n.output,y=n.image&&n.image.orientation?Math.max(1,Math.min(8,n.image.orientation)):null,g=p&&p.quality,m=null===g?null:g/100,w=p&&p.type||null,x=p&&p.background||null,_=[];f&&("number"==typeof f.width||"number"==typeof f.height)&&_.push({type:"resize",data:f}),s&&20===s.length&&_.push({type:"filter",data:s});var b=function e(n){Promise.resolve(u?u(n):n).then(t)},T=function t(n,r){var u,c,l=Z(n);Promise.resolve(h.length?(u=l,c=h,new Promise(function(t){var e,n={width:u.width,height:u.height},r=u.getContext("2d");(e=c.sort(B).map(function(t){return function(){return new Promise(function(e){X[t[0]](r,n,t[1],e)&&e()})}})).reduce(function(t,e){return t.then(function(t){return e().then(Array.prototype.concat.bind(t))})},Promise.resolve([])).then(function(){return t(u)})})):l).then(function(t){$(t,r,a).then(function(n){var r;if(d(t),o)return b(n);(r=e,new Promise(function(t){var e=new FileReader;e.onload=function(){return t(W(e.result)||null)},e.readAsArrayBuffer(r.slice(0,262144))})).then(function(t){null!==t&&(n=new Blob([t,n.slice(20)],{type:n.type})),b(n)})}).catch(i)})};if(/svg/.test(e.type)&&null===w)return j(e,l,h,{background:x}).then(function(e){t(Y(e,"image/svg+xml"))});var E,A,k=URL.createObjectURL(e);(A=k,new Promise(function(t,e){var n=new Image;n.onload=function(){t(n)},n.onerror=function(t){e(t)},n.src=A})).then(function(t){URL.revokeObjectURL(k);var n=v(t,y,l,{canvasMemoryLimit:c,background:x}),r={quality:m,type:w||e.type};if(!_.length)return T(n,r);var i=Q(V);i.post({transforms:_,imageData:n},function(t){T(q(t),r),i.terminate()},[n.data.buffer])}).catch(i)})};function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(e,n,r,i){t||(t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(n||0===a||(n={children:void 0}),n&&o)for(var u in o)void 0===n[u]&&(n[u]=o[u]);else n||(n=o||{});if(1===a)n.children=i;else if(a>1){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+3];n.children=c}return{$$typeof:t,type:e,key:void 0===r?null:""+r,ref:null,props:n,_owner:null}}function tr(t){var e;if("function"==typeof Symbol&&(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator])||Symbol.iterator&&null!=(e=t[Symbol.iterator])))return e.call(t);throw TypeError("Object is not async iterable")}function ti(t){this.wrapped=t}function to(t){var e,n;function r(e,n){try{var o=t[e](n),a=o.value,u=a instanceof ti;Promise.resolve(u?a.wrapped:a).then(function(t){if(u){r("next",t);return}i(o.done?"return":"normal",t)},function(t){r("throw",t)})}catch(c){i("throw",c)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function t(i,o){return new Promise(function(t,a){var u={key:i,arg:o,resolve:t,reject:a,next:null};n?n=n.next=u:(e=n=u,r(i,o))})},"function"!=typeof t.return&&(this.return=void 0)}function ta(t){return function(){return new to(t.apply(this,arguments))}}function tu(t){return new ti(t)}function tc(t,e){var n={},r=!1;function i(n,i){return r=!0,i=new Promise(function(e){e(t[n](i))}),{done:!1,value:e(i)}}return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(t){return r?(r=!1,t):i("next",t)},"function"==typeof t.throw&&(n.throw=function(t){if(r)throw r=!1,t;return i("throw",t)}),"function"==typeof t.return&&(n.return=function(t){return i("return",t)}),n}function tl(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(l){n(l);return}u.done?e(c):Promise.resolve(c).then(r,i)}function tf(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){tl(o,r,i,a,u,"next",t)}function u(t){tl(o,r,i,a,u,"throw",t)}a(void 0)})}}function ts(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function th(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function td(t,e,n){return e&&th(t.prototype,e),n&&th(t,n),t}function tp(t,e){for(var n in e){var r=e[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n,r)}if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++){var a=i[o],r=e[a];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a,r)}return t}function ty(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}function tv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t$(){return(t$=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function tg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){tv(t,e,n[e])})}return t}function tm(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function tw(t){return(tw=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function tx(t,e){return(tx=Object.setPrototypeOf||function t(e,n){return e.__proto__=n,e})(t,e)}function t_(t,e,n){return(t_=!function t(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?function t(e,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(e,i));return r&&tx(o,r.prototype),o}:Reflect.construct).apply(null,arguments)}function tb(t){var e="function"==typeof Map?new Map:void 0;return(tb=function t(n){var r;if(null===n||(r=n,-1===Function.toString.call(r).indexOf("[native code]")))return n;if("function"!=typeof n)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return t_(n,arguments,tw(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),tx(i,n)})(t)}function tT(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function tE(t){return t&&t.__esModule?t:{default:t}}function tA(t){if(t&&t.__esModule)return t;var e={};if(null!=t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}}return e.default=t,e}function t8(t,e){if(t!==e)throw TypeError("Cannot instantiate an arrow function")}function tk(t){if(null==t)throw TypeError("Cannot destructure undefined")}function tO(t,e){if(null==t)return{};var n,r,i=function t(e,n){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||(o[r]=e[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function t0(t,e){return e&&("object"==typeof e||"function"==typeof e)?e:function t(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function tP(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tw(t)););return t}function tI(t,e,n){return(tI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function t(e,n,r){var i=tP(e,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(t,e,n||t)}function tR(t,e,n,r){return(tR="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function t(e,n,r,i){var o,a=tP(e,n);if(a){if((o=Object.getOwnPropertyDescriptor(a,n)).set)return o.set.call(i,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(i,n)){if(!o.writable)return!1;o.value=r,Object.defineProperty(i,n,o)}else tv(i,n,r);return!0})(t,e,n,r)}function t3(t,e,n,r,i){if(!tR(t,e,n,r||t)&&i)throw Error("failed to set property");return n}function tM(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function tC(t,e){return e||(e=t.slice(0)),t.raw=e,t}function tS(t,e){if(t!==tD)return t;throw ReferenceError(e+" is not defined - temporal dead zone")}function tN(t){throw Error('"'+t+'" is read-only')}function tz(t){throw Error('Class "'+t+'" cannot be referenced in computed property keys.')}"function"==typeof Symbol&&Symbol.asyncIterator&&(to.prototype[Symbol.asyncIterator]=function(){return this}),to.prototype.next=function(t){return this._invoke("next",t)},to.prototype.throw=function(t){return this._invoke("throw",t)},to.prototype.return=function(t){return this._invoke("return",t)};var tD={};function tL(t,e){return tG(t)||function t(e,n){for(var r,i=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(i.push(r.value),!n||i.length!==n););return i}(t,e)||tB()}function tF(t){return function t(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(t)||tU(t)||function t(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}function tG(t){if(Array.isArray(t))return t}function tU(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function tB(){throw TypeError("Invalid attempt to destructure non-iterable instance")}function t1(t){return function(){var e=t.apply(this,arguments);return e.next(),e}}function tj(t){var e=function t(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(t,"string");return"symbol"==typeof e?e:String(e)}function t4(t,e){throw Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function tq(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function t2(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var t6=0;function t7(t){return"__private_"+t6+++"_"+t}function t5(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw TypeError("attempted to use private field on non-instance");return t}function tV(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");var n=e.get(t);return n.get?n.get.call(t):n.value}function tH(t,e,n){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");var r=e.get(t);if(r.set)r.set.call(t,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}function tW(t,e,n){if(t!==e)throw TypeError("Private static access of wrong provenance");return n.value}function tY(t,e,n,r){if(t!==e)throw TypeError("Private static access of wrong provenance");if(!n.writable)throw TypeError("attempted to set read only private field");return n.value=r,r}function tQ(t,e,n){if(t!==e)throw TypeError("Private static access of wrong provenance");return n}function tJ(){throw TypeError("attempted to set read only static private field")}function t9(t,e,n,r){var i=tK();if(r)for(var o=0;o<r.length;o++)i=r[o](i);var a=e(function t(e){i.initializeInstanceElements(e,u.elements)},n),u=i.decorateClass(function t(e){for(var n=[],r=function(t){return"method"===t.kind&&t.key===a.key&&t.placement===a.placement},i=0;i<e.length;i++){var o,a=e[i];if("method"===a.kind&&(o=n.find(r))){if(ee(a.descriptor)||ee(o.descriptor)){if(et(a)||et(o))throw ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");o.descriptor=a.descriptor}else{if(et(a)){if(et(o))throw ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");o.decorators=a.decorators}tZ(a,o)}}else n.push(a)}return n}(a.d.map(tX)),t);return i.initializeClassElements(a.F,u.elements),i.runClassFinishers(a.F,u.finishers)}function tK(){tK=function(){return t};var t={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,e){["method","field"].forEach(function(n){e.forEach(function(e){e.kind===n&&"own"===e.placement&&this.defineClassElement(t,e)},this)},this)},initializeClassElements:function(t,e){var n=t.prototype;["method","field"].forEach(function(r){e.forEach(function(e){var i=e.placement;e.kind===r&&("static"===i||"prototype"===i)&&this.defineClassElement("static"===i?t:n,e)},this)},this)},defineClassElement:function(t,e){var n=e.descriptor;if("field"===e.kind){var r=e.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(t)}}Object.defineProperty(t,e.key,n)},decorateClass:function(t,e){var n=[],r=[],i={static:[],prototype:[],own:[]};if(t.forEach(function(t){this.addElementPlacement(t,i)},this),t.forEach(function(t){if(!et(t))return n.push(t);var e=this.decorateElement(t,i);n.push(e.element),n.push.apply(n,e.extras),r.push.apply(r,e.finishers)},this),!e)return{elements:n,finishers:r};var o=this.decorateConstructor(n,e);return r.push.apply(r,o.finishers),o.finishers=r,o},addElementPlacement:function(t,e,n){var r=e[t.placement];if(!n&&-1!==r.indexOf(t.key))throw TypeError("Duplicated element ("+t.key+")");r.push(t.key)},decorateElement:function(t,e){for(var n=[],r=[],i=t.decorators,o=i.length-1;o>=0;o--){var a=e[t.placement];a.splice(a.indexOf(t.key),1);var u=this.fromElementDescriptor(t),c=this.toElementFinisherExtras((0,i[o])(u)||u);t=c.element,this.addElementPlacement(t,e),c.finisher&&r.push(c.finisher);var l=c.extras;if(l){for(var f=0;f<l.length;f++)this.addElementPlacement(l[f],e);n.push.apply(n,l)}}return{element:t,finishers:r,extras:n}},decorateConstructor:function(t,e){for(var n=[],r=e.length-1;r>=0;r--){var i=this.fromClassDescriptor(t),o=this.toClassDescriptor((0,e[r])(i)||i);if(void 0!==o.finisher&&n.push(o.finisher),void 0!==o.elements){t=o.elements;for(var a=0;a<t.length-1;a++)for(var u=a+1;u<t.length;u++)if(t[a].key===t[u].key&&t[a].placement===t[u].placement)throw TypeError("Duplicated element ("+t[a].key+")")}}return{elements:t,finishers:n}},fromElementDescriptor:function(t){var e={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===t.kind&&(e.initializer=t.initializer),e},toElementDescriptors:function(t){if(void 0!==t){var e;return(tG(e=t)||tU(e)||tB()).map(function(t){var e=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),e},this)}},toElementDescriptor:function(t){var e=String(t.kind);if("method"!==e&&"field"!==e)throw TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+e+'"');var n=tj(t.key),r=String(t.placement);if("static"!==r&&"prototype"!==r&&"own"!==r)throw TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+r+'"');var i=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var o={kind:e,key:n,placement:r,descriptor:Object.assign({},i)};return"field"!==e?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=t.initializer),o},toElementFinisherExtras:function(t){var e=this.toElementDescriptor(t),n=en(t,"finisher");return{element:e,finisher:n,extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var e={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(t){var e=String(t.kind);if("class"!==e)throw TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+e+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var n=en(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:n}},runClassFinishers:function(t,e){for(var n=0;n<e.length;n++){var r=(0,e[n])(t);if(void 0!==r){if("function"!=typeof r)throw TypeError("Finishers must return a constructor.");t=r}}return t},disallowProperty:function(t,e,n){if(void 0!==t[e])throw TypeError(n+" can't have a ."+e+" property.")}};return t}function tX(t){var e,n=tj(t.key);"method"===t.kind?e={value:t.value,writable:!0,configurable:!0,enumerable:!1}:"get"===t.kind?e={get:t.value,configurable:!0,enumerable:!1}:"set"===t.kind?e={set:t.value,configurable:!0,enumerable:!1}:"field"===t.kind&&(e={configurable:!0,writable:!0,enumerable:!0});var r={kind:"field"===t.kind?"field":"method",key:n,placement:t.static?"static":"field"===t.kind?"own":"prototype",descriptor:e};return t.decorators&&(r.decorators=t.decorators),"field"===t.kind&&(r.initializer=t.value),r}function tZ(t,e){void 0!==t.descriptor.get?e.descriptor.get=t.descriptor.get:e.descriptor.set=t.descriptor.set}function et(t){return t.decorators&&t.decorators.length}function ee(t){return void 0!==t&&!(void 0===t.value&&void 0===t.writable)}function en(t,e){var n=t[e];if(void 0!==n&&"function"!=typeof n)throw TypeError("Expected '"+e+"' to be a function");return n}function er(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n}function ei(){throw TypeError("attempted to reassign private method")}function eo(t,e){eo=function(t,e){return new o(t,e)};var n=tb(RegExp),r=RegExp.prototype,i=new WeakMap;function o(t,e){var r=n.call(this,t);return i.set(r,e),r}function a(t,e){var n=i.get(e);return Object.keys(n).reduce(function(e,r){return e[r]=t[n[r]],e},Object.create(null))}return!function t(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&tx(e,n)}(o,n),o.prototype.exec=function(t){var e=r.exec.call(this,t);return e&&(e.groups=a(e,this)),e},o.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var n=i.get(this);return r[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,function(t,e){return"$"+n[e]}))}if("function"!=typeof e)return r[Symbol.replace].call(this,t,e);var o=this;return r[Symbol.replace].call(this,t,function(){var t=[];return t.push.apply(t,arguments),"object"!=typeof t[t.length-1]&&t.push(a(t,o)),e.apply(this,t)})},eo.apply(this,arguments)}var ea=["x","y","left","top","right","bottom","width","height"],eu=function t(e){var n,r=(n=e,tG(n)||function t(e,n){var r=[],i=!0,o=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done)&&(r.push(u.value),!n||r.length!==n);i=!0);}catch(l){o=!0,a=l}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}(n,2)||tB()),i=r[0],o=r[1],a=o.points?{}:ea.reduce(function(t,e){var n;return t[e]="string"==typeof(n=o[e])&&/%/.test(n)?parseFloat(n)/100:n,t},{});return[i,Object.assign({zIndex:0},o,a),]};"undefined"==typeof window||void 0===window.document||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function t(e,n,r){var i=this;setTimeout(function(){for(var t=i.toDataURL(n,r).split(",")[1],o=atob(t),a=o.length,u=new Uint8Array(a);a--;)u[a]=o.charCodeAt(a);e(new Blob([u],{type:n||"image/png"}))})}});var ec="undefined"!=typeof window&&void 0!==window.document,el=ec&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ef=function t(e){var r=e.addFilter,i=e.utils,o=i.Type,a=i.forin,u=i.getFileFromBlob,c=i.isFile,l=["crop","resize","filter","markup","output"];return r("SHOULD_PREPARE_OUTPUT",function(t,e){var n=e.query;return new Promise(function(t){t(!n("IS_ASYNC"))})}),r("DID_CREATE_ITEM",function(t,e){var n=e.query,r=e.dispatch;n("GET_ALLOW_IMAGE_TRANSFORM")&&t.extend("requestPrepare",function(){return new Promise(function(e,n){r("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:e,failure:n},!0)})})}),r("PREPARE_OUTPUT",function(t,e){var r=e.query,i=e.item;return new Promise(function(e){var o,f,s;(o=r,f=t,s=i,new Promise(function(t){var e,n;if(!o("GET_ALLOW_IMAGE_TRANSFORM")||s.archived||!c(f)||(e=f,!/^image/.test(e.type)))return t(!1);(n=f,new Promise(function(t,e){var r=new Image;r.src=URL.createObjectURL(n);var i=function e(){var n=r.naturalWidth,i=r.naturalHeight;n&&i&&(URL.revokeObjectURL(r.src),clearInterval(o),t({width:n,height:i}))};r.onerror=function(t){URL.revokeObjectURL(r.src),clearInterval(o),e(t)};var o=setInterval(i,1);i()})).then(function(){var e=o("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(e){var n=e(f);if(null==n)return handleRevert(!0);if("boolean"==typeof n)return t(n);if("function"==typeof n.then)return n.then(t)}t(!0)}).catch(function(e){t(!1)})})).then(function(o){if(!o)return e(t);var c=[];r("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&c.push(function(){return new Promise(function(e){e({name:r("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:t})})}),r("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&c.push(function(t,e,n){return new Promise(function(i){t(e,n).then(function(t){return i({name:r("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:t})})})});var f=r("GET_IMAGE_TRANSFORM_VARIANTS")||{};a(f,function(t,e){var n,r=(n=e,function(t,e,r){return t(e,n?n(r):r)});c.push(function(e,n,i){return new Promise(function(o){r(e,n,i).then(function(e){return o({name:t,file:e})})})})});var s=r("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),h=r("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),d=r("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),p=r("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||l;i.setMetadata("output",{type:d,quality:null===s?null:s/100,client:p},!0);var y=function t(e,i){return new Promise(function(t,o){var a=Object.assign({},i);Object.keys(a).filter(function(t){return"exif"!==t}).forEach(function(t){-1===p.indexOf(t)&&delete a[t]});var c,l=a.resize,f=a.exif,s=a.output,d=a.crop,y=a.filter,v=a.markup,$={image:{orientation:f?f.orientation:null},output:s&&(s.type||"number"==typeof s.quality||s.background)?{type:s.type,quality:"number"==typeof s.quality?100*s.quality:null,background:s.background||r("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:l&&(l.size.width||l.size.height)?Object.assign({mode:l.mode,upscale:l.upscale},l.size):void 0,crop:!d||null===(c=d).aspectRatio&&0===c.rotation&&1===c.zoom&&c.center&&.5===c.center.x&&.5===c.center.y&&c.flip&&!1===c.flip.horizontal&&!1===c.flip.vertical?void 0:Object.assign({},d),markup:v&&v.length?v.map(eu):[],filter:y};if($.output){var g=!!s.type&&s.type!==e.type,m=/\/jpe?g$/.test(e.type),w=null!==s.quality&&m&&"always"===h;if(!($.size||$.crop||$.filter||g||w))return t(e)}var x={beforeCreateBlob:r("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:r("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:r("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:r("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};tt(e,$,x).then(function(r){var i,o=u(r,n(e.name,(i=r.type,/jpeg|png|svg\+xml/.test(i)?i:"image/jpeg")));t(o)}).catch(o)})};Promise.all(c.map(function(e){return e(y,t,i.getMetadata())})).then(function(t){e(1===t.length&&null===t[0].name?t[0].file:t)})})})}),{options:{allowImageTransform:[!0,o.BOOLEAN],imageTransformImageFilter:[null,o.FUNCTION],imageTransformOutputMimeType:[null,o.STRING],imageTransformOutputQuality:[null,o.INT],imageTransformOutputStripImageHead:[!0,o.BOOLEAN],imageTransformClientTransforms:[null,o.ARRAY],imageTransformOutputQualityMode:["always",o.STRING],imageTransformVariants:[null,o.OBJECT],imageTransformVariantsIncludeDefault:[!0,o.BOOLEAN],imageTransformVariantsDefaultName:[null,o.STRING],imageTransformVariantsIncludeOriginal:[!1,o.BOOLEAN],imageTransformVariantsOriginalName:["original_",o.STRING],imageTransformBeforeCreateBlob:[null,o.FUNCTION],imageTransformAfterCreateBlob:[null,o.FUNCTION],imageTransformCanvasMemoryLimit:[ec&&el?16777216:null,o.INT,],imageTransformCanvasBackgroundColor:[null,o.STRING]}}};return ec&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ef})),ef});
